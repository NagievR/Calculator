{"version":3,"sources":["components/keyboard/single-key/key.module.css","app.module.css","components/screen/screen.module.css","components/screen/output/output.module.css","components/screen/journal-switcher/journal-switcher.js","logic/providers/store.js","components/screen/output/operations-log.js","components/screen/output/result.js","components/screen/output/output.js","components/screen/screen.js","components/keyboard/keys-row.js","logic/handlers/clear-key-action.js","logic/handlers/current-input-number.js","logic/calculator-core.js","logic/handlers/math-operator-action.js","logic/providers/handlers-composition.js","logic/handlers/equals-key-action.js","logic/providers/define-input-type.js","components/keyboard/single-key/key.js","components/keyboard/keyboard.js","components/journal/history-block.js","components/journal/journal.js","logic/adapt-keyboard-events.js","app.js","index.js","components/journal/journal.module.css","components/keyboard/keyboard.module.css","components/screen/journal-switcher/journal-switcher.module.css"],"names":["module","exports","JournalSwitcher","switcherDisplaying","setJournalDisplaying","iconOpen","useState","iconToShow","setIconToShow","toggleIcon","prev","useEffect","switchJournal","setSwitchJournal","handler","e","key","keyCode","document","addEventListener","removeEventListener","id","styles","wrapper","switcher_btn","style","top","onClick","onFocus","target","blur","Context","React","createContext","useStore","useContext","StoreProvider","children","numbersStack","useRef","operatorsStack","currentNumber","setCurrentNumber","result","setResult","interimResult","setInterimResult","log","setLog","history","setHistory","context","separateFloatBy","current","clearStore","length","Provider","value","OperationsLog","setSwitcherDisplaying","maxDisplayWidth","isOversized","setIsOversized","logContainerRef","offsetWidth","className","log_margin_bottom","output_elem_wrap","oversized","ref","join","Result","numberContainerRef","mode","max","intermediate_res","formate","num","numberStringified","String","split","int","float","intReadable","Number","toLocaleString","formatted","includes","Output","output_container","Screen","displayRef","screen","clientWidth","KeysRow","keys_row","clearKeyAction","store","clearKeyHandler","thereIsUncalculatedPart","equalsIdx","lastIndexOf","calculatePart","slice","res","concat","addCalculatedPartOnly","currentInputNumber","isEndOfExpression","numberHandler","maxNumberLength","MAX_SAFE_INTEGER","filter","it","isNaN","countNumbersAmount","floatKeyHandler","negateKeyHandler","deleteKeyHandler","calculate","operators","numbers","iterations","pop","b","a","op","sum","doOperation","push","setToFixed","maxFloatLength","isInteger","fixed","toFixed","i","savedNumbersStack","savedOperatorsStack","mathOperatorsAction","calcInterimResult","currOp","intermediateResult","priority","lastOpSaved","operatorsManager","mathOperatorHandler","number","parseFloat","changeOperator","HandlersCompositionProvider","equalsKeyHandler","equalsKeyAction","useDefineInputType","operatorsAction","symbols","DefineInputTypeProvider","defineInputType","alert","console","Key","Keyboard","keyboard","HistoryBlock","data","expression","history_block","Journal","display","journal","bottom","main_container","color","history_header","reverse","map","idx","changeInto","App","journalDisplaying","currentKey","setCurrentKey","handleKeyboardEvent","app","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.fd7f16ee.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"key\":\"key_key__1-T1I\",\"double_key\":\"key_double_key__3PwSw\",\"math_operator\":\"key_math_operator__34NU0\",\"delete\":\"key_delete__2_vut\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__3RidC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"screen\":\"screen_screen__2GNd0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"output_container\":\"output_output_container__1SNab\",\"log\":\"output_log__2Y47n\",\"result\":\"output_result__2Ayua\",\"intermediate_res\":\"output_intermediate_res__HGfcZ\",\"output_elem_wrap\":\"output_output_elem_wrap__3IXPR\",\"oversized\":\"output_oversized__1hmcB\",\"log_margin_bottom\":\"output_log_margin_bottom__1AK8b\"};","import React, { useEffect, useState } from 'react';\r\nimport styles from './journal-switcher.module.css';\r\n\r\nexport function JournalSwitcher({ switcherDisplaying, setJournalDisplaying }) {\r\n  const iconOpen = '▲';\r\n  const iconHide = '×';\r\n  const [iconToShow, setIconToShow] = useState(iconOpen);\r\n\r\n  useEffect(() => {\r\n    if (!switcherDisplaying) {\r\n      setIconToShow(iconOpen);\r\n      setJournalDisplaying(false);\r\n    } \r\n  }, [setJournalDisplaying, switcherDisplaying]);\r\n\r\n  function toggleIcon() { \r\n    setIconToShow( iconToShow === iconOpen ? iconHide : iconOpen );\r\n    setJournalDisplaying(prev => !prev);\r\n  }\r\n\r\n  function toggleDisplaying() {\r\n    const hide = '-30px';\r\n    const show = '0';\r\n    return switcherDisplaying ? {top: show} : {top: hide};\r\n  }\r\n\r\n  // handle journal switching from keyboard\r\n  const [switchJournal, setSwitchJournal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handler = e => {\r\n      if (e.key === 'ArrowRight' || e.keyCode === 70) {\r\n        setSwitchJournal(prev => !prev);\r\n      }\r\n    }\r\n    document.addEventListener(\"keydown\", handler);\r\n    return () => document.removeEventListener(\"keydown\", handler);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (switcherDisplaying) {\r\n      toggleIcon();\r\n    } // eslint-disable-next-line\r\n  }, [switchJournal]);\r\n\r\n  return (\r\n    <div id={styles.wrapper}>\r\n      <button \r\n        id={styles.switcher_btn}\r\n        style={toggleDisplaying()}\r\n        onClick={toggleIcon}\r\n        onFocus={e => e.target.blur()}\r\n        >{iconToShow}\r\n      </button>\r\n    </div>\r\n  );\r\n}","import React, { useState, useContext, useRef } from 'react';\r\n\r\nconst Context = React.createContext();\r\nexport function useStore() {\r\n  return useContext(Context);\r\n}\r\n\r\nexport function StoreProvider({ children }) {\r\n  const numbersStack = useRef([]);  \r\n  const operatorsStack = useRef([]);\r\n\r\n  const separateFloatBy = '.';\r\n  const [currentNumber, setCurrentNumber] = useState('');\r\n  const [result, setResult] = useState('');\r\n  const [interimResult, setInterimResult] = useState('');\r\n  const [log, setLog] = useState([]);\r\n  const [history, setHistory] = useState([]);\r\n\r\n  function clearStore() {\r\n    operatorsStack.current.length = 0;\r\n    numbersStack.current.length = 0;\r\n    setCurrentNumber('');\r\n    setResult('');\r\n    setInterimResult('');\r\n    setLog([]);\r\n  }\r\n\r\n  const context = {\r\n    separateFloatBy,\r\n    currentNumber,\r\n    setCurrentNumber,\r\n    result,\r\n    setResult,\r\n    interimResult,\r\n    setInterimResult,\r\n    log,\r\n    setLog,\r\n    history,\r\n    setHistory,\r\n    numbersStack: numbersStack.current,\r\n    operatorsStack: operatorsStack.current,\r\n    clearStore,\r\n  };\r\n\r\n  return (\r\n    <Context.Provider value={context}>\r\n      {children}\r\n    </Context.Provider>\r\n  );\r\n}","import React, { useState, useEffect, useRef } from 'react';\r\nimport styles from './output.module.css';\r\n\r\nimport { useStore } from \"../../../logic/providers/store.js\";\r\n\r\nexport function OperationsLog({ setSwitcherDisplaying, maxDisplayWidth }) {\r\n  const [isOversized, setIsOversized] = useState(false);\r\n  const logContainerRef = useRef();\r\n  const { log, history } = useStore();\r\n\r\n  useEffect(() => {\r\n    if (logContainerRef.current.offsetWidth > maxDisplayWidth || history.length) {\r\n      setSwitcherDisplaying(true);\r\n    } else {\r\n      setSwitcherDisplaying(false);\r\n    }\r\n    if (logContainerRef.current.offsetWidth > maxDisplayWidth) {\r\n      setIsOversized(true);\r\n    } else {\r\n      setIsOversized(false);\r\n    }\r\n  }, [log, setSwitcherDisplaying, maxDisplayWidth, history]);\r\n\r\n  const oversizedCheck = () => isOversized ? styles.oversized : '';\r\n\r\n  return (\r\n    <div className={styles.log_margin_bottom}>\r\n      <div className={`${styles.output_elem_wrap} ${oversizedCheck()}`}>\r\n        <span \r\n          ref={logContainerRef} \r\n          id={styles.log}\r\n          >{log.join(' ')}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useRef } from 'react';\r\nimport styles from './output.module.css';\r\n\r\nimport { Textfit } from 'react-textfit';\r\nimport { useStore } from \"../../../logic/providers/store.js\";\r\n\r\nexport function Result() {\r\n  const numberContainerRef = useRef();\r\n  const {\r\n    separateFloatBy,\r\n    currentNumber, \r\n    interimResult, \r\n    result, \r\n  } = useStore();\r\n  \r\n  function defineOutputSource() {\r\n    if (interimResult) {\r\n      return formate(interimResult, separateFloatBy);\r\n    } else if (result) {\r\n      return formate(result, separateFloatBy);\r\n    } else if (currentNumber) {\r\n      return formate(currentNumber, separateFloatBy);\r\n    } else {\r\n      return '0';\r\n    }\r\n  }\r\n\r\n  function isInterimResultCheck() {\r\n    return (currentNumber || result) ? '' : styles.intermediate_res;\r\n  };\r\n\r\n  return (\r\n    <Textfit \r\n      mode=\"single\"\r\n      max={80}>\r\n      <div className={styles.output_elem_wrap}>   \r\n        <span \r\n          ref={numberContainerRef} \r\n          className={isInterimResultCheck()} \r\n          id={styles.result}>\r\n          {defineOutputSource()}\r\n        </span>\r\n      </div> \r\n    </Textfit>\r\n  );\r\n}\r\n\r\nfunction formate(num, separateFloatBy) { \r\n  const numberStringified = String(num);\r\n  const [int, float] = numberStringified.split(separateFloatBy);\r\n  const intReadable = Number(int).toLocaleString();\r\n  const formatted = `${intReadable}${separateFloatBy}${float}`;\r\n  return numberStringified.includes(separateFloatBy) ? formatted : intReadable;\r\n}","import React from 'react';\r\nimport styles from './output.module.css';\r\n\r\nimport { OperationsLog } from './operations-log.js'; \r\nimport { Result } from './result.js';\r\n\r\nexport function Output({ setSwitcherDisplaying, maxDisplayWidth }) {\r\n  return (\r\n    <div id={styles.output_container}>\r\n      <OperationsLog \r\n        setSwitcherDisplaying={setSwitcherDisplaying}\r\n        maxDisplayWidth={maxDisplayWidth}\r\n      />\r\n      <Result />\r\n    </div>\r\n  );\r\n}","import React, { useState, useRef } from 'react';\r\nimport styles from './screen.module.css';\r\n\r\nimport { JournalSwitcher } from './journal-switcher/journal-switcher.js';\r\nimport { Output } from './output/output.js';\r\n\r\nexport function Screen({ setJournalDisplaying }) {\r\n  const [switcherDisplaying, setSwitcherDisplaying] = useState(false);\r\n  const displayRef = useRef();\r\n  return (\r\n    <div ref={displayRef} id={styles.screen}>\r\n      <JournalSwitcher \r\n        switcherDisplaying={switcherDisplaying}\r\n        setJournalDisplaying={setJournalDisplaying}  \r\n      />\r\n      <Output \r\n        setSwitcherDisplaying={setSwitcherDisplaying}\r\n        maxDisplayWidth={displayRef.current && displayRef.current.clientWidth}\r\n      />\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport styles from './keyboard.module.css';\r\n\r\nexport function KeysRow({ children }) {\r\n  return (\r\n    <div className={styles.keys_row}>\r\n      {children}\r\n    </div>\r\n  );\r\n}","export function clearKeyAction(store) {\r\n  const { \r\n    clearStore, \r\n    log, \r\n    result, \r\n    setHistory \r\n  } = store;\r\n\r\n  function addCalculatedPartOnly() {\r\n    const equalsIdx = log.lastIndexOf('=');\r\n    const calculatePart = log.slice(0, equalsIdx + 1);\r\n    const res = log[equalsIdx + 1];\r\n    setHistory(prev => prev.concat([[calculatePart.join(' '), res]]));\r\n  }\r\n\r\n  return {\r\n    clearKeyHandler() {\r\n      // add the log to history if needed\r\n      const thereIsUncalculatedPart = log[log.length - 1] !== '=';\r\n      if (log.includes('=') && thereIsUncalculatedPart) {\r\n        addCalculatedPartOnly();\r\n      } else if (log.includes('=')) {\r\n        setHistory(prev => prev.concat([[log.join(' '), result]]));\r\n      }\r\n\r\n      clearStore();\r\n    },\r\n    \r\n  }\r\n}","export function currentInputNumber(store) {\r\n  const {\r\n    separateFloatBy,\r\n    currentNumber,\r\n    setCurrentNumber, \r\n    setInterimResult,\r\n    result,\r\n    setResult,\r\n    log,\r\n    setHistory,\r\n    clearStore,\r\n  } = store;\r\n\r\n  function isEndOfExpression(num = '') {\r\n    if (log[log.length - 1] !== '=') {\r\n      return false;\r\n    }\r\n    clearStore();\r\n    setHistory(prev => prev.concat([[log.join(' '), result]]));\r\n    setCurrentNumber(String(num));\r\n    return true;\r\n  }\r\n\r\n  return {\r\n    numberHandler(num) {\r\n      if (isEndOfExpression(num)) {\r\n        return;\r\n      } \r\n      setInterimResult('');\r\n\r\n      const maxNumberLength = String(Number.MAX_SAFE_INTEGER).length; \r\n      const numbersAmount = countNumbersAmount(currentNumber);\r\n      if (numbersAmount >= maxNumberLength) {\r\n        return;\r\n\r\n      } else if (\r\n        currentNumber[0] === '0' \r\n        && currentNumber.length > 0  \r\n        && !currentNumber.includes(separateFloatBy)\r\n      ) {\r\n        setCurrentNumber(prev => prev.slice(1) + (num !== '0' ? num : ''));\r\n        return;\r\n      }      \r\n\r\n      setCurrentNumber(prev => prev += num);\r\n    },\r\n\r\n    floatKeyHandler() {\r\n      if (currentNumber.includes(separateFloatBy) || \r\n        isEndOfExpression('0' + separateFloatBy)) {\r\n        return;\r\n      } else if (!currentNumber.length) {\r\n        setCurrentNumber(prev => prev += '0' + separateFloatBy);\r\n      } else {\r\n        setCurrentNumber(prev => prev += separateFloatBy);\r\n      }\r\n      setResult('');\r\n      setInterimResult('');\r\n    },\r\n\r\n    negateKeyHandler() {\r\n      if (!currentNumber.length || currentNumber === '0' || isEndOfExpression()) {\r\n        return;\r\n      } else if (currentNumber.includes('-')) {\r\n        setCurrentNumber(prev => prev.slice(1));\r\n      } else {\r\n        setCurrentNumber(prev => '-' + prev);\r\n      }\r\n    },\r\n\r\n    deleteKeyHandler() {\r\n      if (isEndOfExpression()) {\r\n        return;\r\n      } else if (currentNumber.includes('-') && currentNumber.length === 2) {\r\n        setCurrentNumber('');\r\n      } else {\r\n        setCurrentNumber(prev => prev.slice(0, prev.length - 1));\r\n      }\r\n    },\r\n\r\n  };\r\n}\r\n\r\nfunction countNumbersAmount(num) {\r\n  const splitted = String(num).split('');\r\n  const onlyNumbers = splitted.filter(it => !isNaN(it));\r\n  return onlyNumbers.length;\r\n}","export function operatorsManager(currOp, operators, numbers) {\r\n  if (!operators.length) {\r\n    operators.push(currOp);\r\n    return;\r\n  }\r\n  \r\n  let intermediateResult = null;\r\n\r\n  const prevOp = operators[operators.length - 1];\r\n  if (prevOp.priority < currOp.priority) {\r\n    operators.push(currOp);\r\n  } else {\r\n    intermediateResult = calculate(operators, numbers);\r\n    operators.push(currOp);\r\n  }\r\n\r\n  if (operators[1] && (operators[0].priority === operators[1].priority)) {\r\n    const lastOpSaved = operators.pop();\r\n    intermediateResult = calculate(operators, numbers);\r\n    operators.push(lastOpSaved);\r\n  }\r\n\r\n  return setToFixed(intermediateResult);\r\n};\r\n\r\nexport function calculate(operators, numbers, iterations = 1) {\r\n  while (iterations) {\r\n    const [b, a] = [numbers.pop(), numbers.pop()];\r\n    const op = operators.pop();\r\n    const sum = op.doOperation(a, b);\r\n    numbers.push(sum);\r\n    iterations--;\r\n  }\r\n  return setToFixed(numbers[numbers.length - 1]);\r\n} \r\n\r\nfunction setToFixed(num, maxFloatLength = 6) {\r\n  if (Number.isInteger(num) || num === null || String(num).includes('e')) {\r\n    return num;\r\n  }\r\n  let fixed = Number(num).toFixed(maxFloatLength);\r\n\r\n  // remove all '0's from the end after toFixed method\r\n  for (let i = fixed.length-1; i > 2; i--) {\r\n    if (fixed[i] !== '0') {\r\n      break;\r\n    }\r\n    fixed = fixed.slice(0, i);\r\n  }\r\n\r\n  return fixed;\r\n}","import { operatorsManager } from \"../calculator-core.js\";\r\n\r\nlet savedNumbersStack = null;\r\nlet savedOperatorsStack = null;\r\n\r\nexport function mathOperatorsAction(store) {\r\n  const { \r\n    currentNumber,\r\n    setCurrentNumber,\r\n    setResult,\r\n    result, \r\n    setInterimResult,\r\n    log,\r\n    setLog,\r\n    numbersStack,\r\n    operatorsStack,\r\n  } = store;\r\n\r\n  function calcInterimResult(op) {\r\n    const res = operatorsManager(op, operatorsStack, numbersStack);\r\n    setInterimResult(String(res ?? ''));\r\n  }\r\n\r\n  function changeOperator(op) {\r\n    const isSameOperator = (op.value === log[log.length - 1]);\r\n    if (isSameOperator || !log.length) {\r\n      return;\r\n    }\r\n    setLog(prev => prev.slice(0, prev.length - 1).concat(op.value));\r\n    numbersStack.length = 0;\r\n    operatorsStack.length = 0;\r\n\r\n    numbersStack.push(...savedNumbersStack);\r\n    operatorsStack.push(...savedOperatorsStack);\r\n\r\n    calcInterimResult(op);\r\n  }\r\n  \r\n  return {\r\n    mathOperatorHandler(op) {\r\n      if (!currentNumber) {\r\n        changeOperator(op);\r\n        return;\r\n      } \r\n      const number = result || currentNumber;\r\n      setLog(prev => prev.concat(parseFloat(number), op.value));\r\n      numbersStack.push(Number(number));\r\n\r\n      setResult('');\r\n      setCurrentNumber('');\r\n      setInterimResult('');\r\n\r\n      savedNumbersStack = numbersStack.slice();\r\n      savedOperatorsStack = operatorsStack.slice();\r\n      \r\n      calcInterimResult(op);\r\n    }, \r\n \r\n  };\r\n}","import React, { useContext } from 'react';\r\nimport { useStore } from \"./store.js\";\r\n\r\n// handlers\r\nimport { clearKeyAction } from \"../handlers/clear-key-action.js\";\r\nimport { currentInputNumber } from '../handlers/current-input-number.js';\r\nimport { mathOperatorsAction } from '../handlers/math-operator-action.js';\r\nimport { equalsKeyAction } from '../handlers/equals-key-action.js'\r\n\r\nconst Context = React.createContext();\r\nexport function useHandlersComposition() {\r\n  return useContext(Context);\r\n}\r\n\r\nexport function HandlersCompositionProvider({ children }) {\r\n  const store = useStore();\r\n\r\n  const {\r\n    clearKeyHandler,\r\n  } = clearKeyAction(store);\r\n  \r\n  const {\r\n    numberHandler,\r\n    floatKeyHandler,\r\n    negateKeyHandler,\r\n    deleteKeyHandler,\r\n  } = currentInputNumber(store);\r\n\r\n  const { \r\n    mathOperatorHandler,\r\n  } = mathOperatorsAction(store);\r\n\r\n  const {\r\n    equalsKeyHandler,\r\n  } = equalsKeyAction(store);\r\n  \r\n  const context = {\r\n    numberHandler,\r\n    floatKeyHandler,\r\n    negateKeyHandler,\r\n    deleteKeyHandler,\r\n    mathOperatorHandler,\r\n    equalsKeyHandler,\r\n    clearKeyHandler,\r\n  };\r\n\r\n  return (\r\n    <Context.Provider value={context}>\r\n      {children}\r\n    </Context.Provider>\r\n  );\r\n}\r\n\r\n\r\n","import { calculate } from \"../calculator-core.js\";\r\n\r\nexport function equalsKeyAction(store) {\r\n  const { \r\n    currentNumber,\r\n    setCurrentNumber, \r\n    setResult,\r\n    setLog,\r\n    numbersStack,\r\n    operatorsStack,\r\n  } = store;\r\n\r\n  return {\r\n    equalsKeyHandler() {\r\n      if (!operatorsStack.length) {\r\n        return;\r\n        \r\n      } else if (!currentNumber) {\r\n        setLog(prev => prev.concat('0')); \r\n        numbersStack.push(0); \r\n        \r\n      } else {\r\n        numbersStack.push(Number(currentNumber));\r\n        setLog(prev => prev.concat(currentNumber));\r\n      }\r\n      \r\n      setLog(prev => prev.concat('='));\r\n\r\n      const res = calculate(operatorsStack, numbersStack, operatorsStack.length);\r\n      setResult(String(res));\r\n      setCurrentNumber(String(res));\r\n    },\r\n\r\n  };\r\n}","import React, { useContext } from 'react';\r\nimport { useHandlersComposition } from \"./handlers-composition.js\";\r\n\r\nconst Context = React.createContext();\r\nexport function useDefineInputType() {\r\n  return useContext(Context);\r\n}\r\n\r\nconst operatorsAction = {\r\n  '÷': {value: '÷', priority: 2, doOperation: (a, b) => a / b },\r\n  '×': {value: '×', priority: 2, doOperation: (a, b) => a * b },\r\n  '−': {value: '−', priority: 1, doOperation: (a, b) => a - b }, \r\n  '+': {value: '+', priority: 1, doOperation: (a, b) => a + b },\r\n};\r\nconst symbols = {\r\n  equals: '=',\r\n  clearAll: 'c',\r\n  remove: '⌫',\r\n  negate: '±',\r\n  float: '.',\r\n};\r\n\r\nexport function DefineInputTypeProvider({ children }) {\r\n  const { \r\n    mathOperatorHandler, \r\n    numberHandler,\r\n    floatKeyHandler,\r\n    negateKeyHandler,\r\n    deleteKeyHandler,\r\n    equalsKeyHandler,\r\n    clearKeyHandler,\r\n  } = useHandlersComposition();\r\n\r\n  function defineInputType(value) {\r\n    if (!isNaN(value)) {\r\n      numberHandler(String(value));\r\n      return;\r\n    } \r\n    if (operatorsAction[value]) {\r\n      mathOperatorHandler(operatorsAction[value]);\r\n      return;\r\n    }\r\n    switch(value) {\r\n      case symbols.equals: \r\n        equalsKeyHandler();\r\n        break;\r\n      case symbols.clearAll: \r\n        clearKeyHandler();\r\n        break;\r\n      case symbols.remove: \r\n        deleteKeyHandler();\r\n        break;\r\n      case symbols.negate: \r\n        negateKeyHandler();\r\n        break;\r\n      case symbols.float: \r\n        floatKeyHandler();\r\n        break;\r\n      default: \r\n        alert('unknown symbol');\r\n        console.log(`unknown symbol: \"${value}\"`);\r\n    }\r\n  }\r\n\r\n  const context = {\r\n    defineInputType,\r\n  };\r\n\r\n  return (\r\n    <Context.Provider value={context}>\r\n      {children}\r\n    </Context.Provider>\r\n  );\r\n}","import React from 'react';\r\nimport styles from './key.module.css';\r\n\r\nimport { useDefineInputType } from \"../../../logic/providers/define-input-type.js\";\r\n\r\nexport function Key ({ value, className }) {\r\n  const { defineInputType } = useDefineInputType();\r\n\r\n  return (\r\n    <div \r\n      onClick={() => defineInputType(value)} \r\n      className={`${styles.key} ${styles[className] ?? ''}`}\r\n    >{value}\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport styles from './keyboard.module.css';\r\n\r\nimport { KeysRow } from './keys-row.js'\r\nimport { Key } from './single-key/key.js'\r\n\r\nexport function Keyboard() {\r\n  return ( \r\n    <div id={styles.keyboard}>\r\n      <KeysRow>\r\n        <Key value={'c'} className={'double_key'} />\r\n        <Key value={'⌫'} className={'delete'}  />\r\n        <Key value={'÷'} className={'math_operator'} />\r\n      </KeysRow>\r\n      <KeysRow>\r\n        <Key value={'7'} />\r\n        <Key value={'8'} />       \r\n        <Key value={'9'} />\r\n        <Key value={'×'} className={'math_operator'} />\r\n      </KeysRow>\r\n      <KeysRow>\r\n        <Key value={'4'} />\r\n        <Key value={'5'} />       \r\n        <Key value={'6'} />\r\n        <Key value={'−'} className={'math_operator'} />\r\n      </KeysRow>\r\n      <KeysRow>\r\n        <Key value={'1'} />\r\n        <Key value={'2'} />       \r\n        <Key value={'3'} />\r\n        <Key value={'+'} className={'math_operator'} />\r\n      </KeysRow>\r\n      <KeysRow>\r\n        <Key value={'±'} />\r\n        <Key value={'0'} />       \r\n        <Key value={'.'} />\r\n        <Key value={'='} className={'math_operator'} />\r\n      </KeysRow>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport styles from './journal.module.css';\r\n\r\nexport function HistoryBlock({ data }) {\r\n  const [expression, result] = data;\r\n  return (\r\n    <li className={styles.history_block}>\r\n      {expression}&nbsp;<span className={styles.result}>{result}</span>\r\n    </li>\r\n  );\r\n}","import React from 'react';\r\nimport styles from './journal.module.css';\r\n\r\nimport { useStore } from \"../../logic/providers/store.js\";\r\nimport { HistoryBlock } from \"./history-block.js\";  \r\n\r\nexport function Journal({ display }) {\r\n  const { \r\n    log,\r\n    history,\r\n    setHistory,\r\n  } = useStore();\r\n\r\n  function toggleDisplaying() {\r\n    const hide = '-420px';\r\n    const show = '0';\r\n    return display ? {bottom: show} : {bottom: hide};\r\n  }\r\n\r\n  function addHistoryBlocks() {\r\n    const reversed = history.slice(0).reverse();\r\n    return reversed.map((it, idx) => {\r\n      return <HistoryBlock data={it} key={idx + it[1]} />\r\n    }); \r\n  }\r\n\r\n  const handleClearClick = () => setHistory([]);\r\n\r\n  return (\r\n    <div id={styles.journal} style={toggleDisplaying()}>\r\n      <div id={styles.main_container}>\r\n\r\n        <div>{log.join(' ')}</div>\r\n        <hr color=\"#ebebeb\" />\r\n        <div id={styles.history_header}>\r\n          <span>History</span>\r\n          {!!history.length &&\r\n            <button onClick={handleClearClick}>CLEAR HISTORY</button>}\r\n        </div>\r\n\r\n        <ul id={styles.history}>{addHistoryBlocks()}</ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}","const changeInto = {\r\n  'Delete': 'c',\r\n  'Escape': 'c',\r\n  'Shift': '±',\r\n  'Backspace': '⌫',\r\n  'Enter': '=',\r\n  '/': '÷',\r\n  '*': '×',\r\n  '-': '−',\r\n  '+': '+',\r\n  '.': '.',\r\n};\r\n\r\nexport function handleKeyboardEvent(key) {\r\n  if (key === null || (isNaN(key) && !changeInto[key])) {\r\n    return null;\r\n  } else if (changeInto[key]) {\r\n    return changeInto[key]; \r\n  } else if (!isNaN(key)) {\r\n    return key;\r\n  } else {\r\n    console.log(`unknown key: \"${key}\"`);\r\n    return null;\r\n  }\r\n}","import React, { useState, useEffect } from 'react';\r\nimport styles from './app.module.css';\r\n\r\nimport { Screen } from './components/screen/screen.js';\r\nimport { Keyboard } from './components/keyboard/keyboard.js';\r\nimport { Journal } from './components/journal/journal.js';\r\n\r\nimport { handleKeyboardEvent } from \"./logic/adapt-keyboard-events.js\";\r\nimport { useDefineInputType } from \"./logic/providers/define-input-type.js\";\r\n\r\nexport function App() {\r\n  const [journalDisplaying, setJournalDisplaying] = useState(false);\r\n  \r\n  // generate and handle events from the keyboard\r\n  const [currentKey, setCurrentKey] = useState(null);\r\n  const { defineInputType } = useDefineInputType();\r\n\r\n  useEffect(() => {\r\n    const handler = e => setCurrentKey(e.key);\r\n    document.addEventListener(\"keydown\", handler);\r\n    return () => document.removeEventListener(\"keydown\", handler);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const key = handleKeyboardEvent(currentKey);\r\n    if (key) {\r\n      defineInputType(key);\r\n      setCurrentKey(null);\r\n    } // eslint-disable-next-line\r\n  }, [currentKey]);\r\n\r\n  return (\r\n    <div id={styles.app}>\r\n      <Screen setJournalDisplaying={setJournalDisplaying} />\r\n      <Keyboard />\r\n      <Journal display={journalDisplaying} />\r\n    </div>     \r\n  );\r\n}","import ReactDOM from 'react-dom';\r\nimport React from 'react';\r\n\r\nimport './index.css';\r\nimport { App } from './app.js';\r\n\r\n// providers\r\nimport { StoreProvider } from \"./logic/providers/store.js\";\r\nimport { HandlersCompositionProvider } from \"./logic/providers/handlers-composition.js\";\r\nimport { DefineInputTypeProvider } from \"./logic/providers/define-input-type.js\";\r\n\r\nReactDOM.render(\r\n  <StoreProvider>\r\n    <HandlersCompositionProvider>\r\n      <DefineInputTypeProvider>\r\n        <App />\r\n      </DefineInputTypeProvider>\r\n    </HandlersCompositionProvider>\r\n  </StoreProvider>,\r\n\r\n  document.getElementById('root')\r\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"journal\":\"journal_journal__3kM43\",\"main_container\":\"journal_main_container__VEWPl\",\"history\":\"journal_history__3cxDQ\",\"result\":\"journal_result__2Nyds\",\"history_header\":\"journal_history_header__1795_\",\"history_block\":\"journal_history_block__3UUfd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"keyboard\":\"keyboard_keyboard__379H4\",\"keys_row\":\"keyboard_keys_row__1rbkV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"switcher_btn\":\"journal-switcher_switcher_btn__3lFxP\",\"wrapper\":\"journal-switcher_wrapper__2MqhC\"};"],"sourceRoot":""}