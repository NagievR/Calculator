{"version":3,"sources":["components/screen/journal-switcher/journal-switcher.js","logic/store.js","components/screen/output/operations-log.js","components/screen/output/result.js","components/screen/output/output.js","components/screen/screen.js","components/keyboard/keys-row.js","logic/handlers/current-input-number.js","logic/calculate.js","logic/handlers/math-operator-action.js","logic/handlers-composition.js","logic/handlers/equals-key-action.js","logic/define-input-type.js","components/keyboard/single-key/key.js","components/keyboard/keyboard.js","components/journal/journal.js","app.js","index.js"],"names":["JournalSwitcher","switcherDisplaying","setJournalDisplaying","showIcon","useState","iconToShow","setIconToShow","useEffect","id","style","top","onClick","e","target","textContent","prev","Context","React","createContext","useStore","useContext","StoreProvider","children","numbersStack","useRef","operatorsStack","currentNumber","setCurrentNumber","result","setResult","interimResult","setInterimResult","log","setLog","context","separateFloatBy","operatorsAction","value","priority","doOperation","a","b","current","clearStore","length","Provider","OperationsLog","setSwitcherDisplaying","displayWidth","isOversized","setIsOversized","logContainerRef","offsetWidth","className","ref","join","Result","numberContainerRef","console","clear","alert","mode","max","formate","setVisibleFloatLength","num","numberStringified","String","split","int","float","intReadable","Number","toLocaleString","formatted","includes","maxFloatLength","isInteger","numFixed","toFixed","i","slice","Output","Screen","KeysRow","currentInputNumber","store","isItEndOfExpression","numberHandler","maxNumberLength","MAX_SAFE_INTEGER","filter","it","isNaN","countNumbersAmount","floatKeyHandler","negateKeyHandler","deleteKeyHandler","calculate","operators","numbers","iterations","pop","op","sum","push","savedNumbersStack","savedOperatorsStack","mathOperatorsAction","calcInterimResult","res","currOp","intermediateResult","lastOpSaved","operatorsManager","mathOperatorHandler","number","concat","changeOperator","HandlersCompositionProvider","equalsKeyHandler","equalsKeyAction","clearKeyHandler","DefineInputTypeProvider","symbols","defineInputType","Key","Keyboard","Journal","display","bottom","App","journalDisplaying","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7acb67b7.chunk.js","sourcesContent":["import {React, useEffect, useState} from 'react';\r\n\r\nimport './journal-switcher.css';\r\n\r\nexport function JournalSwitcher({ switcherDisplaying, setJournalDisplaying }) {\r\n  const showIcon = '▲';\r\n  const hideIcon = '×';\r\n  const [iconToShow, setIconToShow] = useState(showIcon);\r\n\r\n  useEffect(() => {\r\n    if (!switcherDisplaying) {\r\n      setIconToShow(showIcon);\r\n      setJournalDisplaying(false);\r\n    } \r\n  }, [setJournalDisplaying, switcherDisplaying]);\r\n\r\n  function toggleIcon(e) {\r\n    setIconToShow( e.target.textContent === showIcon ? hideIcon : showIcon );\r\n    setJournalDisplaying(prev => !prev);\r\n  }\r\n\r\n  function toggleDisplaying() {\r\n    const hide = '-30px';\r\n    const show = '0';\r\n    return switcherDisplaying ? {top: show} : {top: hide};\r\n  }\r\n\r\n  return (\r\n    <div id='switcher-btn-wrap'>\r\n      <button id='switcher-btn' style={toggleDisplaying()} onClick={toggleIcon}>\r\n        {iconToShow}\r\n      </button>\r\n    </div>\r\n  );\r\n}","import React, { useState, useContext, useRef } from 'react';\r\n\r\nconst Context = React.createContext();\r\nexport function useStore() {\r\n  return useContext(Context);\r\n}\r\n\r\nexport function StoreProvider({ children }) {\r\n  const numbersStack = useRef([]);  \r\n  const operatorsStack = useRef([]);\r\n\r\n  const [currentNumber, setCurrentNumber] = useState('');\r\n  const [result, setResult] = useState('');\r\n  const [interimResult, setInterimResult] = useState('');\r\n  const [log, setLog] = useState([]);\r\n\r\n  const separateFloatBy = '.';\r\n\r\n  const operatorsAction = {\r\n    '÷': {value: '÷', priority: 2, doOperation: (a, b) => a / b },\r\n    '×': {value: '×', priority: 2, doOperation: (a, b) => a * b },\r\n    '−': {value: '−', priority: 1, doOperation: (a, b) => a - b }, \r\n    '+': {value: '+', priority: 1, doOperation: (a, b) => a + b },\r\n  };\r\n\r\n  function clearStore() {\r\n    operatorsStack.current.length = 0;\r\n    numbersStack.current.length = 0;\r\n    setCurrentNumber('');\r\n    setResult('');\r\n    setInterimResult('');\r\n    setLog([]);\r\n  }\r\n\r\n  const context = {\r\n    separateFloatBy,\r\n    currentNumber,\r\n    setCurrentNumber,\r\n    result,\r\n    setResult,\r\n    interimResult,\r\n    setInterimResult,\r\n    log,\r\n    setLog,\r\n    operatorsAction,\r\n    numbersStack: numbersStack.current,\r\n    operatorsStack: operatorsStack.current,\r\n    clearStore,\r\n  };\r\n\r\n  return (\r\n    <Context.Provider value={context}>\r\n      {children}\r\n    </Context.Provider>\r\n  );\r\n}","import {React, useState, useEffect, useRef} from 'react';\r\n\r\nimport './output.css';\r\nimport { useStore } from \"../../../logic/store.js\";\r\n\r\nexport function OperationsLog({ setSwitcherDisplaying, displayWidth }) {\r\n  const [isOversized, setIsOversized] = useState(false);\r\n  const logContainerRef = useRef();\r\n  const { log } = useStore();\r\n\r\n  useEffect(() => {\r\n    if (logContainerRef.current.offsetWidth > displayWidth) {\r\n      setIsOversized(true);\r\n      setSwitcherDisplaying(true);\r\n    } else {\r\n      setIsOversized(false);\r\n      setSwitcherDisplaying(false);\r\n    }\r\n  }, [log, setSwitcherDisplaying, displayWidth]);\r\n\r\n  return (\r\n    <div className='log-margin-bottom'>\r\n      <div className={`output-elem-wrap ${isOversized ? 'oversized' : ''}`}>\r\n        <span ref={logContainerRef} id='log'>{log.join(' ')}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { React, useRef } from 'react';\r\nimport { Textfit } from 'react-textfit';\r\n\r\nimport './output.css';\r\nimport { useStore } from \"../../../logic/store.js\";\r\n\r\nexport function Result() {\r\n  const numberContainerRef = useRef();\r\n  const {\r\n    separateFloatBy,\r\n    currentNumber, \r\n    interimResult, \r\n    result, \r\n  } = useStore();\r\n\r\n  // ======== testing\r\n  console.clear();\r\n  console.log(`currentNumber: ${currentNumber}\\ninterimResult:${interimResult}\\nresult:${result}\\n***********`);\r\n  if (typeof currentNumber !== 'string' \r\n    || typeof result !== 'string'\r\n    || typeof result !== 'string' \r\n  ) {\r\n      alert('Error');\r\n  }\r\n  // ================\r\n\r\n  function defineOutputSource() {\r\n    if (interimResult) {\r\n      let floatCorrected = setVisibleFloatLength(interimResult, 4);\r\n      return formate(floatCorrected, separateFloatBy);\r\n\r\n    } else if (result) {\r\n      let floatCorrected = setVisibleFloatLength(result);\r\n      return formate(floatCorrected, separateFloatBy);\r\n\r\n    } else if (currentNumber) {\r\n      return formate(currentNumber, separateFloatBy);\r\n\r\n    } else {\r\n      return '0';\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Textfit \r\n      mode=\"single\"\r\n      max={80}>\r\n      <div className={`output-elem-wrap`}>   \r\n        <span \r\n          ref={numberContainerRef} \r\n          className={currentNumber || result ? '' : 'intermediate-res'} \r\n          id='result'>\r\n          {defineOutputSource()}\r\n        </span>\r\n      </div> \r\n    </Textfit>\r\n  );\r\n}\r\n\r\nfunction formate(num, separateFloatBy) { \r\n  const numberStringified = String(num);\r\n  const [int, float] = numberStringified.split(separateFloatBy);\r\n  const intReadable = Number(int).toLocaleString();\r\n  const formatted = `${intReadable}${separateFloatBy}${float}`;\r\n  return numberStringified.includes(separateFloatBy) ? formatted : intReadable;\r\n}\r\n\r\nfunction setVisibleFloatLength(num, maxFloatLength = 4) {\r\n  num = String(num);\r\n\r\n  if (Number.isInteger(Number(num))) {\r\n    return num;\r\n  }\r\n\r\n  let numFixed = Number(num).toFixed(maxFloatLength);\r\n  for (let i = numFixed.length-1; i > 2; i--) {\r\n    if (numFixed[i] !== '0') {\r\n      break;\r\n    }\r\n    numFixed = numFixed.slice(0, i)\r\n  }\r\n\r\n  return numFixed;\r\n}","import {React} from 'react';\r\n\r\nimport './output.css';\r\nimport {OperationsLog} from './operations-log.js'; \r\nimport {Result} from './result.js';\r\n\r\nexport function Output({ setSwitcherDisplaying }) {\r\n  const displayWidth = 315;\r\n\r\n  return (\r\n    <div id='output-container'>\r\n      <OperationsLog \r\n        displayWidth={displayWidth}\r\n        setSwitcherDisplaying={setSwitcherDisplaying} \r\n      />\r\n      <Result \r\n        displayWidth={displayWidth} \r\n      />\r\n    </div>\r\n  );\r\n}","import { React, useState } from 'react';\r\n\r\nimport './screen.css';\r\nimport { JournalSwitcher } from './journal-switcher/journal-switcher.js';\r\nimport { Output } from './output/output.js';\r\n\r\nexport function Screen({ setJournalDisplaying }) {\r\n  const [switcherDisplaying, setSwitcherDisplaying] = useState(false);\r\n\r\n  return (\r\n    <div id='screen'>\r\n      <JournalSwitcher \r\n        switcherDisplaying={switcherDisplaying}\r\n        setJournalDisplaying={setJournalDisplaying}  \r\n      />\r\n      <Output \r\n        setSwitcherDisplaying={setSwitcherDisplaying}\r\n      />\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\n\r\nimport './keyboard.css';\r\n\r\nexport function KeysRow({ children }) {\r\n  return (\r\n    <div id='keys-row'>{children}</div>\r\n  );\r\n}","export function currentInputNumber(store) {\r\n  const {\r\n    separateFloatBy,\r\n    currentNumber,\r\n    setCurrentNumber, \r\n    setInterimResult,\r\n    setResult,\r\n    log,\r\n    clearStore,\r\n  } = store;\r\n\r\n  function isItEndOfExpression(num = '') {\r\n    if (log[log.length - 1] !== '=') {\r\n      return false;\r\n    }\r\n    clearStore();\r\n    setCurrentNumber(String(num));\r\n    return true;\r\n  }\r\n\r\n  return {\r\n    numberHandler(num) {\r\n      if (isItEndOfExpression(num)) {\r\n        return;\r\n      } \r\n      setInterimResult('');\r\n\r\n      const maxNumberLength = String(Number.MAX_SAFE_INTEGER).length; \r\n      const numbersAmount = countNumbersAmount(currentNumber);\r\n      if (numbersAmount >= maxNumberLength) {\r\n        return;\r\n\r\n      } else if (\r\n        currentNumber[0] === '0' \r\n        && currentNumber.length > 0  \r\n        && !currentNumber.includes(separateFloatBy)\r\n      ) {\r\n        setCurrentNumber(prev => prev.slice(1) + (num !== '0' ? num : ''));\r\n        return;\r\n      }      \r\n\r\n      setCurrentNumber(prev => prev += num);\r\n    },\r\n\r\n    floatKeyHandler() {\r\n      if (currentNumber.includes(separateFloatBy) || \r\n        isItEndOfExpression('0' + separateFloatBy)) {\r\n        return;\r\n      } else if (!currentNumber.length) {\r\n        setCurrentNumber(prev => prev += '0' + separateFloatBy);\r\n      } else {\r\n        setCurrentNumber(prev => prev += separateFloatBy);\r\n      }\r\n      setResult('');\r\n      setInterimResult('');\r\n    },\r\n\r\n    negateKeyHandler() {\r\n      if (!currentNumber.length || currentNumber === '0' || isItEndOfExpression()) {\r\n        return;\r\n      } else if (currentNumber.includes('-')) {\r\n        setCurrentNumber(prev => prev.slice(1));\r\n      } else {\r\n        setCurrentNumber(prev => '-' + prev);\r\n      }\r\n    },\r\n\r\n    deleteKeyHandler() {\r\n      if (isItEndOfExpression()) {\r\n        return;\r\n      } else if (currentNumber.includes('-') && currentNumber.length === 2) {\r\n        setCurrentNumber('');\r\n      } else {\r\n        setCurrentNumber(prev => prev.slice(0, prev.length - 1));\r\n      }\r\n      setResult('');\r\n      setInterimResult('');\r\n    },\r\n\r\n  };\r\n}\r\n\r\nfunction countNumbersAmount(num) {\r\n  const splitted = String(num).split('');\r\n  const onlyNumbers = splitted.filter(it => !isNaN(it));\r\n  return onlyNumbers.length;\r\n}","export function operatorsManager(currOp, operators, numbers) {\r\n  if (!operators.length) {\r\n    operators.push(currOp);\r\n    return;\r\n  }\r\n  \r\n  let intermediateResult = null;\r\n\r\n  const prevOp = operators[operators.length - 1];\r\n  if (prevOp.priority < currOp.priority) {\r\n    operators.push(currOp);\r\n  } else {\r\n    intermediateResult = calculate(operators, numbers);\r\n    operators.push(currOp);\r\n  }\r\n\r\n  if (operators[1] && (operators[0].priority === operators[1].priority)) {\r\n    const lastOpSaved = operators.pop();\r\n    intermediateResult = calculate(operators, numbers);\r\n    operators.push(lastOpSaved);\r\n  }\r\n\r\n  return intermediateResult;\r\n};\r\n\r\nexport function calculate(operators, numbers, iterations = 1) {\r\n  while (iterations) {\r\n    const [b, a] = [numbers.pop(), numbers.pop()];\r\n    const op = operators.pop();\r\n    const sum = op.doOperation(a, b);\r\n    numbers.push(sum);\r\n    iterations--;\r\n  }\r\n  return numbers[numbers.length - 1];\r\n} ","import { operatorsManager } from \"../calculate.js\";\r\n\r\nlet savedNumbersStack = null;\r\nlet savedOperatorsStack = null;\r\n\r\nexport function mathOperatorsAction(store) {\r\n  const { \r\n    currentNumber,\r\n    setCurrentNumber,\r\n    setResult,\r\n    result, \r\n    setInterimResult,\r\n    log,\r\n    setLog,\r\n    numbersStack,\r\n    operatorsStack,\r\n  } = store;\r\n\r\n  function calcInterimResult(op) {\r\n    const res = operatorsManager(op, operatorsStack, numbersStack);\r\n    setInterimResult(String(res ?? ''));\r\n  }\r\n\r\n  function changeOperator(op) {\r\n    const isSameOperator = op.value === log[log.length - 1];\r\n    if (isSameOperator || !log.length) {\r\n      return;\r\n    }\r\n    setLog(prev => prev.slice(0, prev.length - 1).concat(op.value));\r\n    numbersStack.length = 0;\r\n    operatorsStack.length = 0;\r\n\r\n    numbersStack.push(...savedNumbersStack);\r\n    operatorsStack.push(...savedOperatorsStack);\r\n\r\n    calcInterimResult(op);\r\n  }\r\n  \r\n  return {\r\n    mathOperatorHandler(op) {\r\n      if (!currentNumber) {\r\n        changeOperator(op);\r\n        return;\r\n      } \r\n      const number = result || currentNumber;\r\n      setLog(prev => prev.concat(number, op.value));\r\n      numbersStack.push(Number(number));\r\n\r\n      setResult('');\r\n      setCurrentNumber('');\r\n      setInterimResult('');\r\n\r\n      savedNumbersStack = numbersStack.slice();\r\n      savedOperatorsStack = operatorsStack.slice();\r\n      \r\n      calcInterimResult(op);\r\n    }, \r\n \r\n  };\r\n}","import React, { useContext } from 'react';\r\nimport { useStore } from \"./store.js\";\r\n\r\n// handlers\r\nimport { currentInputNumber } from './handlers/current-input-number.js';\r\nimport { mathOperatorsAction } from './handlers/math-operator-action.js';\r\nimport { equalsKeyAction } from './handlers/equals-key-action.js'\r\n\r\nconst Context = React.createContext();\r\nexport function useHandlersComposition() {\r\n  return useContext(Context);\r\n}\r\n\r\nexport function HandlersCompositionProvider({ children }) {\r\n  const { clearStore } = useStore();\r\n  function clearKeyHandler() {\r\n    clearStore();\r\n  }\r\n\r\n  const store = useStore();\r\n  \r\n  const {\r\n    numberHandler,\r\n    floatKeyHandler,\r\n    negateKeyHandler,\r\n    deleteKeyHandler,\r\n  } = currentInputNumber(store);\r\n\r\n  const { \r\n    mathOperatorHandler,\r\n  } = mathOperatorsAction(store);\r\n\r\n  const {\r\n    equalsKeyHandler,\r\n  } = equalsKeyAction(store);\r\n  \r\n  const context = {\r\n    numberHandler,\r\n    floatKeyHandler,\r\n    negateKeyHandler,\r\n    deleteKeyHandler,\r\n    mathOperatorHandler,\r\n    equalsKeyHandler,\r\n    clearKeyHandler,\r\n  };\r\n\r\n  return (\r\n    <Context.Provider value={context}>\r\n      {children}\r\n    </Context.Provider>\r\n  );\r\n}\r\n\r\n\r\n","import { calculate } from \"../calculate.js\";\r\n\r\nexport function equalsKeyAction(store) {\r\n  const { \r\n    currentNumber,\r\n    setCurrentNumber, \r\n    setResult,\r\n    setLog,\r\n    numbersStack,\r\n    operatorsStack,\r\n  } = store;\r\n\r\n  return {\r\n    equalsKeyHandler() {\r\n      if (!operatorsStack.length) {\r\n        return;\r\n        \r\n      } else if (!currentNumber) {\r\n        setLog(prev => prev.concat('0')); \r\n        numbersStack.push(0); \r\n        \r\n      } else {\r\n        numbersStack.push(Number(currentNumber));\r\n        setLog(prev => prev.concat(currentNumber));\r\n      }\r\n      \r\n      setLog(prev => prev.concat('='));\r\n\r\n      const res = calculate(operatorsStack, numbersStack, operatorsStack.length);\r\n      setResult(String(res));\r\n      setCurrentNumber(String(res));\r\n    },\r\n\r\n  };\r\n}","import React, { useContext } from 'react';\r\nimport { useHandlersComposition } from \"./handlers-composition.js\";\r\nimport { useStore } from './store.js';\r\n\r\nconst Context = React.createContext();\r\nexport function useDefineInputType() {\r\n  return useContext(Context);\r\n}\r\n\r\nexport function DefineInputTypeProvider({ children }) {\r\n  const symbols = {\r\n    equals: '=',\r\n    clearAll: 'c',\r\n    remove: '⌫',\r\n    negate: '±',\r\n    float: '.',\r\n  };\r\n  const { operatorsAction } = useStore();\r\n  const { \r\n    mathOperatorHandler, \r\n    numberHandler,\r\n    floatKeyHandler,\r\n    negateKeyHandler,\r\n    deleteKeyHandler,\r\n    equalsKeyHandler,\r\n    clearKeyHandler,\r\n  } = useHandlersComposition();\r\n\r\n  function defineInputType(value) {\r\n    if (!isNaN(value)) {\r\n      numberHandler(String(value));\r\n      return;\r\n    } \r\n    if (operatorsAction[value]) {\r\n      mathOperatorHandler(operatorsAction[value]);\r\n      return;\r\n    }\r\n    switch(value) {\r\n      case symbols.equals: \r\n        equalsKeyHandler();\r\n        break;\r\n      case symbols.clearAll: \r\n        clearKeyHandler();\r\n        break;\r\n      case symbols.remove: \r\n        deleteKeyHandler();\r\n        break;\r\n      case symbols.negate: \r\n        negateKeyHandler();\r\n        break;\r\n      case symbols.float: \r\n        floatKeyHandler();\r\n        break;\r\n      default: \r\n        alert('unknown symbol');\r\n        console.log(`unknown symbol: \"${value}\"`);\r\n    }\r\n  }\r\n\r\n  const context = {\r\n    defineInputType,\r\n  };\r\n\r\n  return (\r\n    <Context.Provider value={context}>\r\n      {children}\r\n    </Context.Provider>\r\n  );\r\n}","import React from 'react';\r\n\r\nimport './key.css';\r\nimport { useDefineInputType } from \"../../../logic/define-input-type.js\";\r\n\r\nexport function Key ({ value, className }) {\r\n  const { defineInputType } = useDefineInputType();\r\n\r\n  return (\r\n    <div onClick={() => defineInputType(value)} className={className}>\r\n      {value}\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\n\r\nimport './keyboard.css';\r\nimport { KeysRow } from './keys-row.js'\r\nimport { Key } from './single-key/key.js'\r\n\r\nexport function Keyboard() {\r\n  return ( \r\n    <div id='keyboard'>\r\n      <KeysRow>\r\n        <Key value={'c'} className={'key double-key'} />\r\n        <Key value={'⌫'} className={'key delete'}  />\r\n        <Key value={'÷'} className={'key math-operator'} />\r\n      </KeysRow>\r\n      <KeysRow>\r\n        <Key value={7} className={'key'} />\r\n        <Key value={8} className={'key'} />       \r\n        <Key value={9} className={'key'} />\r\n        <Key value={'×'} className={'key math-operator'} />\r\n      </KeysRow>\r\n      <KeysRow>\r\n        <Key value={4} className={'key'} />\r\n        <Key value={5} className={'key'} />       \r\n        <Key value={6} className={'key'} />\r\n        <Key value={'−'} className={'key math-operator'} />\r\n      </KeysRow>\r\n      <KeysRow>\r\n        <Key value={1} className={'key'} />\r\n        <Key value={2} className={'key'} />       \r\n        <Key value={3} className={'key'} />\r\n        <Key value={'+'} className={'key math-operator'} />\r\n      </KeysRow>\r\n      <KeysRow>\r\n        <Key value={'±'} className={'key'} />\r\n        <Key value={0} className={'key'} />       \r\n        <Key value={'.'} className={'key'} />\r\n        <Key value={'='} className={'key math-operator'} />\r\n      </KeysRow>\r\n    </div>\r\n  );\r\n}","import { React } from 'react';\r\n\r\nimport './journal.css';\r\nimport { useStore } from \"../../logic/store.js\";\r\n\r\nexport function Journal({ display }) {\r\n  const { log } = useStore();\r\n\r\n  function toggleDisplaying() {\r\n    const hide = '-420px';\r\n    const show = '0';\r\n    return display ? {bottom: show} : {bottom: hide};\r\n  }\r\n\r\n  return (\r\n    <div id='journal-container' style={toggleDisplaying()}>\r\n      <div id='journal'>{log.join(' ')} </div>\r\n    </div>\r\n  );\r\n}","import { React, useState } from 'react';\r\n\r\nimport './app.css';\r\nimport { Screen } from './components/screen/screen.js';\r\nimport { Keyboard } from './components/keyboard/keyboard.js';\r\nimport { Journal } from './components/journal/journal.js';\r\n\r\n// providers\r\nimport { StoreProvider } from \"./logic/store.js\";\r\nimport { HandlersCompositionProvider } from \"./logic/handlers-composition.js\";\r\nimport { DefineInputTypeProvider } from \"./logic/define-input-type.js\";\r\n\r\nexport function App() {\r\n  const [journalDisplaying, setJournalDisplaying] = useState(false);\r\n\r\n  return (\r\n    <StoreProvider>\r\n      <HandlersCompositionProvider>\r\n        <DefineInputTypeProvider>\r\n\r\n          <div id='app'>\r\n            <Screen setJournalDisplaying={setJournalDisplaying} />\r\n            <Keyboard />\r\n            <Journal display={journalDisplaying} />\r\n          </div>\r\n          \r\n        </DefineInputTypeProvider>\r\n      </HandlersCompositionProvider>\r\n    </StoreProvider>\r\n  );\r\n}","import ReactDOM from 'react-dom';\nimport React from 'react';\n\nimport './index.css';\nimport {App} from './app.js';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}